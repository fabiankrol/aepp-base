(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-redeem"],{"20a8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.busy?r("div",{staticClass:"spinner"},[r("AeSpinner")],1):r("Page",{staticClass:"redeem-balance",attrs:{"header-fill":"neutral","right-button-to":{name:"transfer"},"right-button-icon-name":"close"}},[r("Guide",{attrs:{slot:"header",template:e.$t("transfer.redeem-balance.guide")},slot:"header"}),r("div",{staticClass:"balance-row"},[r("span",[e._v(e._s(e.$t("transfer.send.amount.balance")))]),r("Balance",{attrs:{balance:e.balance}})],1),e._l(e.accounts,(function(t){return r("ListItemAccount",e._b({key:t.address,attrs:{"border-dark":""},on:{click:function(r){return e.sendToAccount(t.address)}}},"ListItemAccount",t,!1),[r("LeftMore",{attrs:{slot:"right"},slot:"right"})],1)}))],2)},a=[],s=r("e721"),c=s["a"],o=(r("dc68"),r("2877")),u=Object(o["a"])(c,n,a,!1,null,"15cb73e8",null);t["default"]=u.exports},b4f2:function(e,t,r){},dc68:function(e,t,r){"use strict";r("b4f2")},e721:function(e,t,r){"use strict";(function(e){var n=r("f684"),a=(r("d3b7"),r("96cf"),r("070e")),s=r("901e"),c=r.n(s),o=r("4b40"),u=r("9193"),i=r("1472"),d=r("b279"),l=r("cf03"),b=r("9973"),f=r("f908"),p=r("846e"),m=r("179c"),h=r("6b07"),g=r.n(h),k=r("c1b7"),v=r("9e13");t["a"]={components:{AeSpinner:l["a"],Page:b["a"],Guide:f["a"],Balance:p["a"],ListItemAccount:m["a"],LeftMore:g.a},data:function(){return{keypair:null,balance:0,busy:!0}},subscriptions:function(){return Object(a["a"])(this.$store.state.observables,["accounts"])},mounted:function(){var e=this;return Object(n["coroutine"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.keypair){t.next=13;break}return t.prev=1,t.next=4,e.readQrCode();case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t["catch"](1),e.$router.push({name:"transfer"}),"Cancelled by user"!==t.t0.message&&Object(d["d"])(t.t0),t.abrupt("return");case 11:t.next=0;break;case 13:e.busy=!1;case 14:case"end":return t.stop()}}),t,null,[[1,6]])})))()},methods:{readQrCode:function(){var t=this;return Object(n["coroutine"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("modals/open",{name:"readQrCode",title:t.$t("transfer.redeem-balance.scan")});case 2:n=r.sent;try{n=e.from(n,"hex")}catch(s){Object(d["d"])(s),n=e.from([])}if(64===n.length){r.next=8;break}return r.next=7,t.$store.dispatch("modals/open",{name:"alert",text:t.$t("transfer.redeem-balance.wrong-qr-code")});case 7:return r.abrupt("return");case 8:return a=o["TxBuilderHelper"].encode(o["Crypto"].generateKeyPairFromSecret(n).publicKey,"ak"),r.t0=c.a,r.next=12,t.$store.state.sdk.getBalance(a);case 12:if(r.t1=r.sent,t.balance=(0,r.t0)(r.t1).shiftedBy(-k["b"]),!(t.balance<v["b"])){r.next=18;break}return r.next=17,t.$store.dispatch("modals/open",{name:"alert",text:t.$t("transfer.redeem-balance.no-funds")});case 17:return r.abrupt("return");case 18:t.keypair={address:a,privateKey:n};case 19:case"end":return r.stop()}}),r)})))()},sendToAccount:function(e){var t=this;return Object(n["coroutine"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.busy=!0,r.next=3,u["a"].compose(i["a"],{methods:{sign:function(e){return Promise.resolve(o["Crypto"].sign(e,t.keypair.privateKey))},address:function(){return Promise.resolve(t.keypair.address)}}})({url:t.$store.state.sdkUrl});case 3:return r.next=5,r.sent.transferFunds(1,e);case 5:n=r.sent,a=n.hash,s=n.tx.amount,t.$router.push({name:"transfer"}),t.$store.dispatch("modals/open",{name:"spendSuccess",transactionHash:a,amount:c()(s).shiftedBy(-k["b"])});case 10:case"end":return r.stop()}}),r)})))()}}}}).call(this,r("1c35").Buffer)}}]);
//# sourceMappingURL=page-redeem.0cd037ca.js.map